# Flask ê°ì •ë¶„ì„ ì•±ì„ ìœ„í•œ Dockerfile
# ğŸ Python 3.11 ë² ì´ìŠ¤ ì´ë¯¸ì§€ ì‚¬ìš© (ê°€ë²¼ìš´ slim ë²„ì „)
FROM python:3.11-slim

# ğŸ“ ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° ì¶”ê°€
LABEL maintainer="kospi-project"
LABEL description="KOSPI ì£¼ì‹ ê°ì •ë¶„ì„ Flask ì„œë²„"

# ğŸ“ ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì • (/app í´ë”ì—ì„œ ì‘ì—…)
WORKDIR /app

# ğŸ“¦ ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸ ë° í•„ìš” íŒ¨í‚¤ì§€ ì„¤ì¹˜
RUN apt-get update && apt-get install -y \
    curl \
    && rm -rf /var/lib/apt/lists/*

# ğŸ“‹ requirements.txtë¥¼ ë¨¼ì € ë³µì‚¬ (Docker ë ˆì´ì–´ ìºì‹± ìµœì í™”)
COPY requirements.txt .

# ğŸ› ï¸ Python íŒ¨í‚¤ì§€ ì„¤ì¹˜
RUN pip install --no-cache-dir -r requirements.txt

# ğŸ“ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ ë³µì‚¬
COPY . .

# ğŸŒ Flask ì•±ì´ ì‚¬ìš©í•  í¬íŠ¸ ë…¸ì¶œ
EXPOSE 5001

# ğŸš€ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹œ Flask ì•± ì‹œì‘
CMD ["python", "app.py"] 